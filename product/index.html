<!DOCTYPE html>
<html lang="id">
  <script>
    // Deteksi apakah sedang di GitHub Pages atau lokal
    const isGithub = window.location.hostname.includes('github.io');
    const base = isGithub ? '/faithcraft/' : '/';

    // Tambahkan elemen <base> secara dinamis
    const baseTag = document.createElement('base');
    baseTag.href = base;
    document.head.prepend(baseTag);
  </script>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detail Produk - Faith Craft</title>
  <base href="/faithcraft/">
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/product-detail.css">
</head>
<body class="flex flex-col min-h-screen">

  <!-- Navbar -->
  <header class="navbar">
    <div class="container">
        <!-- Logo ikon kiri -->
        <div class="logo-left">
            <img src="assets/svg/logo.svg" alt="Logo Icon">
        </div>
    
        <!-- Logo-type di tengah -->
        <div class="logo-center">
            <img src="assets/svg/logo-type.svg" alt="FaithCraft Logo Type">
        </div>
    
        <!-- Menu kanan -->
        <nav class="nav-links">
            <a href="./">Beranda</a>
            <a href="catalog/">Katalog</a>
        </nav>
    
        <!-- Hamburger menu untuk mobile -->
        <div class="menu-toggle" id="menu-toggle">☰</div>
    </div>
  </header>
  <div class="overlay" id="overlay"></div>

  <!-- CONTENT -->
  <main>
    <div class="container wrapper">
      <!-- Foto Produk -->
      <div class="photo-product">
        <!-- Thumbnail kiri -->
        <div class="thumbnail-gallery">
          <div class="thumbnails">
            <div class="thumb active"><img src="assets/img/product/photo1.png" alt="Foto Product 1"></div>
            <div class="thumb"><img src="assets/img/product/photo2.png" alt="Foto Product 2"></div>
            <div class="thumb"><img src="assets/img/product/photo3.png" alt="Foto Product 3"></div>
            <div class="thumb"><img src="assets/img/product/photo4.png" alt="Foto Product 4"></div>
            <div class="thumb"><img src="assets/img/product/photo5.png" alt="Foto Product 5"></div>
          </div>
        </div>

        <!-- Foto utama -->
        <div class="main-photo">
          <img src="assets/img/product/photo1.png" alt="Foto Produk Utama">
        </div>
      </div>
  
      <!-- Detail Produk -->
      <div class="product-info">
        <h2 class="product-name">Kemeja Vintage yang sangat bagus</h2>
        <p class="final-price">IDR 86.000</p>
        <p class="product-price">IDR 120.000</p>
  
        <p class="buy-now">Pesan Sekarang Lewat:</p>
        <div class="icon-button">
          <a href="#"><img src="assets/img/marketplace_logo/Shopee-Logo.png" alt="shopee"></a>
          <a href="#"><img src="assets/img/marketplace_logo/Tokopedia-Logo.png" alt="tokopedia"></a>
          <a href="#"><img src="assets/img/marketplace_logo/Tiktokshop-Logo.png" alt="Tiktokshop"></a>
        </div>

        <p class="description">
          Deskripsi produk singkat. Jelaskan bahan, ukuran, style, dan info penting lainnya.
        </p>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-contact">
                <div class="title">
                    Kontak
                </div>
                <p>Shifa residence blok k no 14 kelurahan jayamekar,<br>
                Kecamatan Baros, Kota Sukabumi Jawa Barat<br>
                +62 877-8313-0498</p>
            </div>
            <div class="footer-socials">
                <div class="title">
                    Follow Kami
                </div>
                <a href="#"><img src="assets/svg/icon-facebook.svg" alt="Facebook"></a>
                <a href="#"><img src="assets/svg/icon-instagram.svg" alt="Instagram"></a>
                <a href="#"><img src="assets/svg/icon-tiktok.svg" alt="TikTok"></a>
                <a href="#"><img src="assets/svg/icon-whatsapp.svg" alt="Whatsapp"></a>
            </div>
        </div>
        <div class="footer-content">
            <div class="footer-copyright">
                <p>Hak Cipta © FAITHCRAFT Semua hak dilindungi undang-undang.</p>
            </div>
            <div class="footer-copyright">
                <p>FAITHCRAFT © 2025</p>
            </div>
        </div>
    </div>
  </footer>

  <script>
  // === Navbar toggle ===
  const menuToggle = document.getElementById('menu-toggle');
  const navLinks = document.querySelector('.nav-links');
  const overlay = document.getElementById('overlay');

  menuToggle.addEventListener('click', () => {
    navLinks.classList.toggle('active');
    overlay.style.display = navLinks.classList.contains('active') ? 'block' : 'none';
  });

  overlay.addEventListener('click', () => {
    navLinks.classList.remove('active');
    overlay.style.display = 'none';
  });

  // === Dynamic Product Detail ===
  const params = new URLSearchParams(window.location.search);
  const productId = parseInt(params.get('id'));

  fetch('assets/data/products.json')
    .then(res => res.json())
    .then(products => {
      const product = products.find(p => p.id === productId);
      if (!product) {
        document.querySelector('.wrapper').innerHTML = '<p>Produk tidak ditemukan.</p>';
        return;
      }

      // isi bagian foto utama & thumbnail
      const thumbnailGallery = document.querySelector('.thumbnail-gallery .thumbnails');
      const mainPhoto = document.querySelector('.main-photo img');

      mainPhoto.src = product.images[0];
      thumbnailGallery.innerHTML = product.images.map((img, i) => `
        <div class="thumb ${i === 0 ? 'active' : ''}">
          <img src="${img}" alt="Foto Produk ${i + 1}">
        </div>
      `).join('');

      // detail info
      document.querySelector('.product-name').textContent = product.name;
      document.querySelector('.final-price').textContent = `IDR ${product.finalPrice.toLocaleString()}`;

      // harga coret (hanya jika ada selisih)
      const productPrice = document.querySelector('.product-price');
      if (product.finalPrice < product.price) {
        productPrice.textContent = `IDR ${product.price.toLocaleString()}`;
      } else {
        productPrice.style.display = 'none';
      }

      document.querySelector('.description').textContent = product.description;

      // marketplace link
      const iconButton = document.querySelector('.icon-button');
      iconButton.innerHTML = `
        <a href="${product.marketplaces.shopee}" target="_blank">
          <img src="assets/img/marketplace_logo/Shopee-Logo.png" alt="Shopee">
        </a>
        <a href="${product.marketplaces.tokopedia}" target="_blank">
          <img src="assets/img/marketplace_logo/Tokopedia-Logo.png" alt="Tokopedia">
        </a>
        <a href="${product.marketplaces.tiktok}" target="_blank">
          <img src="assets/img/marketplace_logo/Tiktokshop-Logo.png" alt="Tiktokshop">
        </a>
      `;

      // === Thumbnail interaksi ===
      const thumbs = document.querySelectorAll(".thumbnails .thumb");

      thumbs.forEach(thumb => {
        thumb.addEventListener("click", () => {
          const img = thumb.querySelector("img");

          // ganti foto utama
          mainPhoto.src = img.src;

          // update active class
          thumbs.forEach(t => t.classList.remove("active"));
          thumb.classList.add("active");

          // jika mobile, auto center
          if (window.innerWidth <= 768) {
            thumb.scrollIntoView({
              behavior: "smooth",
              inline: "center",
              block: "nearest"
            });
          }
        });
      });
    })
    .catch(err => {
      console.error(err);
      document.querySelector('.wrapper').innerHTML = '<p>Gagal memuat detail produk.</p>';
    });
</script>
</body>
</html>
